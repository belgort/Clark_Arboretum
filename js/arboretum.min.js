// Compressed JavaScript for Clark Arboretum
$(document).ready(function(){function o(){e.width($(window).innerWidth());e.height($(window).innerHeight())}function N(e,t){var n=e.y;var r=e.x;var i=1<<t;if(n<0||n>=i){return null}if(r<0||r>=i){r=(r%i+i)%i}return{x:r,y:n}}function F(){$.ajax({url:"php/trees.php",data:{initialize:"go"},dataType:"json",success:function(e){$.each(e,function(e,t){var n=new google.maps.LatLng(this.latitude,this.longitude);var r;if(this.treeType==="d"){largeMarker=C;mediumMarker=L;smallMarker=O}else if(this.treeType==="e"){largeMarker=k;mediumMarker=A;smallMarker=M}marker=new google.maps.Marker({treeID:e,position:n,largeMarker:largeMarker,mediumMarker:mediumMarker,smallMarker:smallMarker,largeShadow:_,mediumShadow:D,smallShadow:P,treePhoto:v+this.imageLink,treeType:this.treeType,commonGenus:this.commonGenus,commonName:this.commonName,latinFamily:this.latinFamily,genus:this.genus,species:this.species,animation:google.maps.Animation.DROP});f.push(marker)});I();q()},error:function(e,t){alert("Error Loading Tree Information File\n\n"+e+"\n"+t)}})}function I(){var e=0;for(i=0;i<f.length;i++){e+=1e3;google.maps.event.addListener(f[i],"click",function(){if(this.treeType==="e"){$("#info-title-stripe").removeClass("coral-title-stripe");$("#info-title-stripe").addClass("teal-title-stripe");$("#tree-info-content").removeClass("deciduous-info");$("#tree-info-content").addClass("evergreen-info");if(!$(".tree-info-info").hasClass("teal-info-mobile")){$(".tree-info-info").removeClass("coral-info-mobile");$(".tree-info-info").addClass("teal-info-mobile")}}else{$("#info-title-stripe").removeClass("teal-title-stripe");$("#info-title-stripe").addClass("coral-title-stripe");$("#tree-info-content").removeClass("evergreen-info");$("#tree-info-content").addClass("deciduous-info");if(!$(".tree-info-info").hasClass("coral-info-mobile")){$(".tree-info-info").removeClass("teal-info-mobile");$(".tree-info-info").addClass("coral-info-mobile")}}$("#tree-info-title").html("");$("#tree-info-genus").html("");$("#tree-info-species").html("");if(t===true){$("#tree-info-id").html("")}$("#info-box").fadeIn();var e=this.commonName;var n="Genus: "+this.genus;var r="Species: "+this.species;var i=this.treeID;$("#tree-info-image").html('<img id="loading-image" src="img/loading.gif" alt="loading" />');var s=new Image;s.src=this.treePhoto;s.alt=this.name;s.onload=function(){$("#tree-info-image").html(s);$("#tree-info-title").html(e);$("#tree-info-genus").html(n);$("#tree-info-species").html(r);if(t===true){$("#tree-info-id").html(i)}}});f[i].setIcon(f[i].smallMarker);f[i].setShadow(f[i].smallShadow);f[i].setMap(S)}}function q(e){if(e==="large"){for(var t=0;t<f.length;t++){f[t].setIcon(f[t].largeMarker);f[t].setShadow(f[t].largeShadow)}K.setIcon(K.largeMarker);K.setShadow(K.largeShadow);c="large"}else if(e==="medium"){for(var t=0;t<f.length;t++){f[t].setIcon(f[t].mediumMarker);f[t].setShadow(f[t].mediumShadow)}K.setIcon(K.mediumMarker);K.setShadow(K.mediumShadow);c="medium"}else if(e==="small"){for(var t=0;t<f.length;t++){f[t].setIcon(f[t].smallMarker);f[t].setShadow(f[t].smallShadow)}K.setIcon(K.smallMarker);K.setShadow(K.smallShadow);c="small"}}function R(){$(".scale-tick").each(function(){$(this).removeClass("active-tick")});$("#zoom-"+l).addClass("active-tick")}function U(){$("input[type=checkbox]").each(function(){$(this).prop("checked",true)})}function z(e){if(e==="All"){U();u=true;a=true;treeTypeFilter()}else{for(var t=0;t<f.length;t++){if(f[t].commonGenus===e){f[t].setVisible(true)}else{f[t].setVisible(false)}}}$("#search-box").fadeOut()}function W(){$(".p-trail").each(function(){if($(this).hasClass("option-on")){$(this).removeClass("option-on")}})}function X(){if(navigator.geolocation){navigator.geolocation.getCurrentPosition(J,V,{timeout:1e4})}else{alert("Your browser does not support this feature.")}}function V(e){switch(e.code){case e.PERMISSION_DENIED:alert("You must share your location for this feature.");break;case e.POSITION_UNAVAILABLE:alert("Your location is unavailable.");break;case e.TIMEOUT:alert("Your location request timed out.");break;case e.UNKNOWN_ERROR:alert("An unknown error occurred, please try again.");break}}function J(e){var t=e.coords.latitude;var n=e.coords.longitude;var r=new google.maps.LatLng(t,n);if(g.contains(r)){Q(r);S.setCenter(r);S.setZoom(19)}else{alert("You must be near Clark College with a GPS enabled device for this to work.")}}function Q(e){if(!K.getVisible()){K.setVisible(true)}K.setPosition(e)}function G(){if($("#intro-box").is(":visible")){$("#intro-box").fadeOut()}}function Y(){if(window.sessionStorage!=="undefined"){sessionStorage.setItem("arboretumIntro",true)}}var e=$("#map_canvas");var t=false;var n=true;var r=true;var s=0;if(typeof sessionStorage!=="undefined"){if(sessionStorage.arboretumIntro){r=false}}if(r){$("#intro-box").show()}else{$("#map-controls").show()}o();var u=true;var a=true;var f=[];var l=16;var c="small";var h=false;var p="img/";var d="php/tileChecker.php";var v="img/trees/";var m;if($(window).innerWidth()<768){m=new google.maps.LatLng(45.635557,-122.651564)}else{m=new google.maps.LatLng(45.635872,-122.653924)}var g=new google.maps.LatLngBounds(new google.maps.LatLng(45.631926,-122.660426),new google.maps.LatLng(45.638902,-122.647702));var y={getTileUrl:function(e,t){var n=N(e,t);if(!n){return null}var r=Math.pow(2,t);return d+"?z="+t+"&x="+n.x+"&y="+(r-n.y-1)},tileSize:new google.maps.Size(256,256),maxZoom:20,minZoom:16,name:"CC-Arboretum"};var b=new google.maps.ImageMapType(y);var w=document.getElementById("map_canvas");var E={backgroundColor:"transparent",zoom:16,minZoom:16,maxZoom:20,center:m,disableDefaultUI:true,streetViewControl:false,mapTypeControl:false,navigationControl:false,mapTypeId:google.maps.MapTypeId.ROADMAP};var S=new google.maps.Map(w,E);var x=[{stylers:[{visibility:"off"}]}];var T=[{}];S.setOptions({styles:x});S.overlayMapTypes.insertAt(0,b);google.maps.event.addListenerOnce(S,"tilesloaded",function(){function e(){function e(){$("#map-loading").slideUp()}$("#map-loading").html("MAP READY");var t=setTimeout(e,2500)}var t=setTimeout(e,1e3)});google.maps.event.addListener(S,"dragend",function(){if(g.contains(S.getCenter())){return}var e=S.getCenter(),t=e.lng(),n=e.lat(),r=g.getNorthEast().lng(),i=g.getNorthEast().lat(),s=g.getSouthWest().lng(),o=g.getSouthWest().lat();if(t<s)t=s;if(t>r)t=r;if(n<o)n=o;if(n>i)n=i;S.setCenter(new google.maps.LatLng(n,t))});F();var C={url:p+"markers/d-marker-large.png",size:new google.maps.Size(31,44),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(15,44)};var k={url:p+"markers/e-marker-large.png",size:new google.maps.Size(31,44),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(15,44)};var L={url:p+"markers/d-marker-med.png",size:new google.maps.Size(16,22),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(8,22)};var A={url:p+"markers/e-marker-med.png",size:new google.maps.Size(16,22),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(8,22)};var O={url:p+"markers/d-marker-small.png",size:new google.maps.Size(8,11),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(4,11)};var M={url:p+"markers/e-marker-small.png",size:new google.maps.Size(8,11),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(4,11)};var _={url:p+"markers/marker-shadow-large.png",size:new google.maps.Size(42,37),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(2,34)};var D={url:p+"markers/marker-shadow-med.png",size:new google.maps.Size(21,19),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(0,17)};var P={url:p+"markers/marker-shadow-small.png",size:new google.maps.Size(11,9),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(0,9)};var H={url:p+"markers/u-marker-large.png",size:new google.maps.Size(31,44),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(15,44)};var B={url:p+"markers/u-marker-med.png",size:new google.maps.Size(16,22),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(8,22)};var j={url:p+"markers/u-marker-small.png",size:new google.maps.Size(8,11),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(4,11)};$("#zoom-16").addClass("active-tick");$("#zoom-in").click(function(){if(S.getZoom()<20){S.setZoom(l+1)}});$("#zoom-out").click(function(){if(S.getZoom()>15){S.setZoom(l-1)}});google.maps.event.addListener(S,"zoom_changed",function(){l=S.getZoom();R();if(l>18&&c!=="large"){q("large")}else if(l>16&&l<19&&c!=="medium"){q("medium")}else if(l===16&&c!=="small"){q("small")}});$("#show-all").click(function(e){e.preventDefault();for(i=0;i<f.length;i++){f[i].setVisible(true)}$("#search-box").fadeOut()});U();$("#close-info").click(function(){$("#info-box").fadeOut(function(){$("#tree-info").empty()})});$("#search-trees, #m-search-trees").click(function(){$("#search-box").fadeIn().jScrollPane();$(".jspDrag").css({backgroundColor:"#EA6D55"});if($("#info-box").is(":visible")){$("#info-box").fadeOut()}if($("#mobile-menu").is(":visible")){$("#mobile-menu").fadeOut()}$("#map-controls").fadeOut();G()});$(".type-filter").click(function(e){e.preventDefault();var t=$(this).attr("href");for(i=0;i<f.length;i++){if(f[i].treeType===t){f[i].setVisible(true)}else{f[i].setVisible(false)}}$("#search-box").fadeOut()});$(".cg-filter").click(function(e){e.preventDefault();var t=$(this).attr("href");z(t)});$("#blue-trail").click(function(){d="php/blue-trailTileChecker.php";S.overlayMapTypes.removeAt(0);S.overlayMapTypes.insertAt(0,b);$(this);$("#search-box").fadeOut();if($("#map-controls").is(":hidden")){$("#map-controls").fadeIn()}W();$("#blue-trail").addClass("option-on")});$("#orange-trail").click(function(){d="php/orange-trailTileChecker.php";S.overlayMapTypes.removeAt(0);S.overlayMapTypes.insertAt(0,b);$(this);$("#search-box").fadeOut();if($("#map-controls").is(":hidden")){$("#map-controls").fadeIn()}W();$("#orange-trail").addClass("option-on")});$("#black-trail").click(function(){d="php/black-trailTileChecker.php";S.overlayMapTypes.removeAt(0);S.overlayMapTypes.insertAt(0,b);$(this);$("#search-box").fadeOut();if($("#map-controls").is(":hidden")){$("#map-controls").fadeIn()}W();$("#black-trail").addClass("option-on")});$("#no-trail").click(function(){d="php/tileChecker.php";S.overlayMapTypes.removeAt(0);S.overlayMapTypes.insertAt(0,b);$("#search-box").fadeOut();if($("#map-controls").is(":hidden")){$("#map-controls").fadeIn()}W();$("#no-trail").addClass("option-on")});$("#find-me, #m-find-me").click(function(){X();if($("#mobile-menu").is(":visible")){$("#mobile-menu").fadeOut();$("#map-controls").fadeIn()}});var K=new google.maps.Marker({largeMarker:H,mediumMarker:B,smallMarker:j,largeShadow:_,mediumShadow:D,smallShadow:P,map:S,position:m,visible:false});K.setIcon(K.smallMarker);K.setShadow(K.smallShadow);$("#overlay-on").click(function(e){e.preventDefault();if(n){S.setOptions({styles:T});S.overlayMapTypes.removeAt(0);S.setMapTypeId(google.maps.MapTypeId.HYBRID);n=false;$("#overlay-off").removeClass("option-on");$(this).addClass("option-on")}});$("#overlay-off").click(function(e){e.preventDefault();if(!n){S.setOptions({styles:x});S.overlayMapTypes.insertAt(0,b);S.setMapTypeId(google.maps.MapTypeId.ROADMAP);n=true;$("#overlay-on").removeClass("option-on");$(this).addClass("option-on")}});$("#tree-ids-on").click(function(e){e.preventDefault();t=true;$("#tree-ids-off").removeClass("option-on");$(this).addClass("option-on")});$("#tree-ids-off").click(function(e){e.preventDefault();t=false;$("#tree-ids-on").removeClass("option-on");$(this).addClass("option-on")});$("#about-link").click(function(e){e.preventDefault();$("#about-box").fadeIn();G()});$("#help-link").click(function(e){e.preventDefault();$("#help-box").fadeIn().jScrollPane();$(".jspDrag").css({backgroundColor:"#22A193"});G()});$("#m-menu-about").click(function(e){e.preventDefault();$("#about-box").fadeIn();$("#mobile-menu").hide()});$("#m-menu-help").click(function(e){e.preventDefault();$("#help-box").fadeIn();$("#mobile-menu").hide()});var Z="sTest",et=window.sessionStorage;try{et.setItem(Z,"test");et.removeItem(Z)}catch(tt){if(tt.code==DOMException.QUOTA_EXCEEDED_ERR&&et.length==0){h=true}else{throw tt}}$("#intro-box").click(function(){if(!h){Y()}$("#intro-box").fadeOut();$("#map-controls").fadeIn()});$(".close-item").click(function(){$(this).closest(".pop-up-box").fadeOut();if($("#map-controls").is(":hidden")){$("#map-controls").fadeIn()}});$("#menu-show-hide").click(function(){if($("#mobile-menu").is(":visible")){$("#mobile-menu").hide();$("#map-controls").show()}else{$("#mobile-menu").show();$("#map-controls").hide()}});$(window).resize(function(){if($(window).innerWidth()>768){$("#mobile-menu").hide()}})})